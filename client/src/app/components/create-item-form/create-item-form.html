<mat-card class="form-card">
	<mat-card-header>
		<mat-card-title>Create New Item</mat-card-title>
	</mat-card-header>

	<mat-card-content>
		<form [formGroup]="form()" (ngSubmit)="onSubmit()" class="form">
			<mat-form-field appearance="outline" class="full-width">
				<mat-label>Item Name</mat-label>
				<input matInput formControlName="name" placeholder="Enter item name">
				@if (form().get('name')?.hasError('required') && form().get('name')?.touched) {
				<mat-error>Name is required</mat-error>
				}
			</mat-form-field>

			<mat-form-field appearance="outline" class="full-width">
				<mat-label>Quantity</mat-label>
				<input matInput type="number" formControlName="qty" placeholder="Enter quantity" min="0">
				@if (form().get('qty')?.hasError('required') && form().get('qty')?.touched) {
				<mat-error>Quantity is required</mat-error>
				}
				@if (form().get('qty')?.hasError('min') && form().get('qty')?.touched) {
				<mat-error>Quantity must be positive</mat-error>
				}
			</mat-form-field>

			<button mat-raised-button color="primary" type="submit" [disabled]="!form().valid || isSubmitting()"
				class="submit-button">
				@if (isSubmitting()) {
				Creating...
				} @else {
				Create Item
				}
			</button>
		</form>
	</mat-card-content>
</mat-card>

<!-- Debug info -->
@if (lastCreatedItem()) {
<mat-card class="result-card">
	<mat-card-header>
		<mat-card-title>Last Created Item</mat-card-title>
	</mat-card-header>
	<mat-card-content>
		<pre>{{ lastCreatedItem() | json }}</pre>
	</mat-card-content>
</mat-card>
}

<!-- Form State Debug -->
<mat-card class="debug-card">
	<mat-card-header>
		<mat-card-title>Form State</mat-card-title>
	</mat-card-header>
	<mat-card-content>
		<p><strong>Valid:</strong> {{ form().valid }}</p>
		<p><strong>Value:</strong> {{ form().value | json }}</p>
	</mat-card-content>
</mat-card>